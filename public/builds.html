<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warframe Builder Avan√ßado</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #6a1b9a;
            --primary-dark: #4a148c;
            --primary-light: #9c4dff;
            --secondary: #e91e63;
            --secondary-dark: #c2185b;
            --accent: #ff9800;
            --dark: #121212;
            --darker: #0a0a0a;
            --dark-gray: #1e1e1e;
            --medium-gray: #2d2d2d;
            --light-gray: #424242;
            --light: #f5f5f5;
            --success: #4caf50;
            --warning: #ffc107;
            --danger: #f44336;
            --energy: #00bcd4;
            --health: #f44336;
            --shield: #2196f3;
            --armor: #ff9800;
            --negative: #ff5252;
            --warframe-color: #9c4dff;
            --primary-weapon-color: #2196f3;
            --secondary-weapon-color: #4caf50;
            --melee-weapon-color: #f44336;
            --companion-color: #ff9800;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
        }

        body {
            background-color: var(--dark);
            color: var(--light);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            padding: 20px;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(106, 27, 154, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(233, 30, 99, 0.1) 0%, transparent 20%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
            position: relative;
        }

        .header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 3px;
            background: linear-gradient(to right, var(--primary), var(--accent));
            border-radius: 3px;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }

        .logo-text {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(to right, var(--primary-light), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 10px rgba(156, 77, 255, 0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .actions-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .filter-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .filter-btn.active {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .filter-btn.warframe {
            background-color: var(--warframe-color);
            color: white;
        }

        .filter-btn.primary {
            background-color: var(--primary-weapon-color);
            color: white;
        }

        .filter-btn.secondary {
            background-color: var(--secondary-weapon-color);
            color: white;
        }

        .filter-btn.melee {
            background-color: var(--melee-weapon-color);
            color: white;
        }

        .filter-btn.companion {
            background-color: var(--companion-color);
            color: white;
        }

        .filter-btn.all {
            background-color: var(--medium-gray);
            color: var(--light);
        }

        .builds-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .build-card {
            background-color: var(--dark-gray);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            position: relative;
            border-top: 3px solid var(--primary);
        }

        .build-card.warframe {
            border-top-color: var(--warframe-color);
        }

        .build-card.primary {
            border-top-color: var(--primary-weapon-color);
        }

        .build-card.secondary {
            border-top-color: var(--secondary-weapon-color);
        }

        .build-card.melee {
            border-top-color: var(--melee-weapon-color);
        }

        .build-card.companion {
            border-top-color: var(--companion-color);
        }

        .build-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
        }

        .build-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            padding: 15px;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }

        .build-card.warframe .build-header {
            background: linear-gradient(135deg, var(--warframe-color), var(--primary-dark));
        }

        .build-card.primary .build-header {
            background: linear-gradient(135deg, var(--primary-weapon-color), #1976d2);
        }

        .build-card.secondary .build-header {
            background: linear-gradient(135deg, var(--secondary-weapon-color), #388e3c);
        }

        .build-card.melee .build-header {
            background: linear-gradient(135deg, var(--melee-weapon-color), #d32f2f);
        }

        .build-card.companion .build-header {
            background: linear-gradient(135deg, var(--companion-color), #f57c00);
        }

        .build-title {
            font-size: 1.3rem;
            font-weight: 600;
        }

        .build-type {
            font-size: 0.8rem;
            opacity: 0.9;
            margin-top: 5px;
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            background-color: rgba(255, 255, 255, 0.15);
        }

        .build-actions {
            display: flex;
            gap: 8px;
        }

        .build-action-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .build-action-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .build-image {
            height: 200px;
            background-color: var(--medium-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .build-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, transparent 60%, rgba(0, 0, 0, 0.5));
            z-index: 1;
        }

        .build-image img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
            position: relative;
            z-index: 2;
        }

        .build-content {
            padding: 20px;
        }

        .build-stats {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .stat {
            background-color: var(--medium-gray);
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .health-stat { color: var(--health); }
        .shield-stat { color: var(--shield); }
        .armor-stat { color: var(--armor); }
        .energy-stat { color: var(--energy); }

        .build-description {
            font-size: 0.95rem;
            color: #ccc;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .build-mods {
            margin-top: 15px;
        }

        .mods-title {
            font-size: 0.95rem;
            color: var(--primary-light);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .mods-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .mod-item {
            background-color: var(--medium-gray);
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.75rem;
            position: relative;
            transition: all 0.2s ease;
        }

        .mod-item:hover {
            background-color: var(--light-gray);
            transform: translateY(-2px);
        }

        .mod-stats {
            display: none;
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--darker);
            padding: 10px;
            border-radius: 6px;
            width: 220px;
            z-index: 10;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            font-size: 0.85rem;
            border: 1px solid var(--light-gray);
        }

        .mod-item:hover .mod-stats {
            display: block;
        }

        .mod-stat {
            margin: 4px 0;
            padding: 3px 0;
            border-bottom: 1px solid var(--light-gray);
        }

        .mod-stat:last-child {
            border-bottom: none;
        }

        .mod-stat.negative {
            color: var(--negative);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: 600;
            text-align: center;
            transition: all 0.2s ease;
            cursor: pointer;
            border: none;
            gap: 8px;
            font-size: 0.95rem;
            margin: 5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, var(--primary-light), var(--primary));
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(106, 27, 154, 0.4);
        }

        .btn-secondary {
            background-color: transparent;
            color: var(--light);
            border: 2px solid var(--primary);
        }

        .btn-secondary:hover {
            background-color: rgba(106, 27, 154, 0.2);
        }

        .btn-danger {
            background-color: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background-color: #e53935;
        }

        .btn-sm {
            padding: 5px 10px;
            font-size: 0.8rem;
        }

        .build-editor {
            background-color: var(--dark-gray);
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            display: none;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border-top: 3px solid var(--primary);
        }

        .editor-header {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--medium-gray);
        }

        .editor-title {
            font-size: 1.6rem;
            margin-bottom: 10px;
            color: var(--primary-light);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--light);
        }

        .form-control {
            width: 100%;
            padding: 12px;
            background-color: var(--medium-gray);
            border: 1px solid var(--light-gray);
            border-radius: 6px;
            color: var(--light);
            font-size: 1rem;
            transition: all 0.2s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(106, 27, 154, 0.3);
        }

        /* Estilos para slots de mods espec√≠ficos */
        .mod-slot {
            aspect-ratio: 1/1;
            background-color: var(--medium-gray);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            border: 2px solid var(--medium-gray);
            transition: all 0.2s ease;
        }

        .mod-slot:hover {
            transform: scale(1.05);
        }

        .mod-slot.empty::after {
            content: '+';
            font-size: 1.8rem;
            color: var(--light-gray);
            opacity: 0.7;
        }

        .mod-slot img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
        }

        .mod-slot.aura {
            border-color: var(--success);
            background-color: rgba(76, 175, 80, 0.1);
        }

        .mod-slot.exilus {
            border-color: var(--energy);
            background-color: rgba(0, 188, 212, 0.1);
        }

        .mod-slot.arcane {
            border-color: var(--accent);
            background-color: rgba(255, 152, 0, 0.1);
        }

        .mod-slot-label {
            position: absolute;
            bottom: 2px;
            font-size: 0.7rem;
            color: white;
            background: rgba(0, 0, 0, 0.7);
            width: 100%;
            text-align: center;
            padding: 3px;
            z-index: 2;
        }

        /* Grids para diferentes tipos */
        .warframe-mods-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin: 20px 0;
        }

        .weapon-mods-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin: 20px 0;
        }

        .companion-mods-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin: 20px 0;
        }

        /* Se√ß√µes de arcanos */
        .arcanes-section {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px dashed var(--medium-gray);
        }

        /* Formul√°rio de mod */
        .mod-form {
            background-color: var(--medium-gray);
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }

        .mod-form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 12px;
            align-items: flex-end;
        }

        .mod-form-row input, .mod-form-row select {
            flex: 1;
        }

        .mod-form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        .stat-row {
            display: flex;
            gap: 10px;
            margin-bottom: 12px;
            align-items: center;
        }

        .stat-value {
            width: 100px;
        }

        .stat-type {
            width: 140px;
        }

        .remove-stat {
            color: var(--danger);
            cursor: pointer;
            padding: 5px;
            transition: all 0.2s ease;
        }

        .remove-stat:hover {
            transform: scale(1.2);
        }

        .riven-form {
            background-color: var(--medium-gray);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .riven-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .riven-fields {
            display: none;
        }

        .riven-fields.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .editor-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--medium-gray);
        }

        .image-upload {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            margin: 15px 0;
        }

        .image-preview {
            width: 220px;
            height: 220px;
            background-color: var(--medium-gray);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            border: 2px dashed var(--light-gray);
            transition: all 0.2s ease;
        }

        .image-preview:hover {
            border-color: var(--primary);
        }

        .image-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .no-builds {
            text-align: center;
            padding: 50px;
            color: var(--light-gray);
            grid-column: 1 / -1;
        }

        .no-builds i {
            font-size: 3rem;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        .no-builds h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .no-builds p {
            font-size: 1rem;
        }

        .add-stat-btn {
            margin-bottom: 10px;
            background-color: var(--primary-dark);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .add-stat-btn:hover {
            background-color: var(--primary);
            transform: translateY(-2px);
        }

        /* Efeitos de transi√ß√£o */
        .build-card {
            animation: fadeInUp 0.5s ease;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            .builds-grid {
                grid-template-columns: 1fr;
            }
            
            .warframe-mods-grid, .weapon-mods-grid, .companion-mods-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .mod-form-row {
                flex-direction: column;
                gap: 10px;
            }
            
            .stat-row {
                flex-wrap: wrap;
            }

            .filter-buttons {
                justify-content: center;
            }

            .actions-bar {
                flex-direction: column;
                align-items: stretch;
            }
        }

        @media (max-width: 480px) {
            .warframe-mods-grid, .weapon-mods-grid, .companion-mods-grid {
                grid-template-columns: 1fr;
            }

            .mod-slot {
                aspect-ratio: 2/1;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <i class="fas fa-user-astronaut fa-2x"></i>
                <span class="logo-text">WARFRAME BUILDER</span>
            </div>
            <p>Crie e compartilhe suas builds personalizadas</p>
        </header>

        <div class="actions-bar">
            <button class="btn btn-primary" id="new-build-btn">
                <i class="fas fa-plus"></i> Nova Build
            </button>

            <div class="filter-buttons">
                <button class="filter-btn all active" data-filter="all">
                    <i class="fas fa-th-large"></i> Todas
                </button>
                <button class="filter-btn warframe" data-filter="warframe">
                    <i class="fas fa-user-astronaut"></i> Warframes
                </button>
                <button class="filter-btn primary" data-filter="primary">
                    <i class="fas fa-gun"></i> Prim√°rias
                </button>
                <button class="filter-btn secondary" data-filter="secondary">
                    <i class="fas fa-gun"></i> Secund√°rias
                </button>
                <button class="filter-btn melee" data-filter="melee">
                    <i class="fas fa-sword"></i> Corpo-a-Corpo
                </button>
                <button class="filter-btn companion" data-filter="companion">
                    <i class="fas fa-paw"></i> Companheiros
                </button>
            </div>
        </div>

        <div class="builds-grid" id="builds-grid">
            <!-- Builds ser√£o carregadas aqui -->
        </div>

        <!-- Editor de Build -->
        <div class="build-editor" id="build-editor">
            <div class="editor-header">
                <h2 class="editor-title" id="editor-title">Criar Nova Build</h2>
            </div>
            
            <div class="form-group">
                <label for="build-name">Nome da Build</label>
                <input type="text" id="build-name" class="form-control" placeholder="Ex: Saryn Spore Build">
            </div>
            
            <div class="form-group">
                <label for="build-type">Tipo de Build</label>
                <select id="build-type" class="form-control">
                    <option value="warframe">Warframe</option>
                    <option value="primary">Arma Prim√°ria</option>
                    <option value="secondary">Arma Secund√°ria</option>
                    <option value="melee">Arma Corpo-a-Corpo</option>
                    <option value="companion">Companheiro</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="item-name">Nome do Item</label>
                <input type="text" id="item-name" class="form-control" placeholder="Ex: Saryn, Rubico, Gram Prime">
            </div>
            
            <div class="image-upload">
                <div class="image-preview" id="image-preview">
                    <i class="fas fa-image fa-3x" style="color: var(--light-gray);"></i>
                </div>
                <input type="file" id="image-upload" accept="image/*" style="display: none;">
                <button type="button" class="btn btn-secondary" onclick="document.getElementById('image-upload').click()">
                    <i class="fas fa-upload"></i> Carregar Imagem
                </button>
            </div>
            
            <!-- Se√ß√£o de Mods din√¢mica -->
            <div id="mods-configuration">
                <!-- Warframe -->
                <div id="warframe-mods-section">
                    <h3>Mods de Warframe</h3>
                    <div class="warframe-mods-grid" id="warframe-mods-grid">
                        <!-- 8 slots normais -->
                        <div class="mod-slot empty" data-slot="0"></div>
                        <div class="mod-slot empty" data-slot="1"></div>
                        <div class="mod-slot empty" data-slot="2"></div>
                        <div class="mod-slot empty" data-slot="3"></div>
                        <div class="mod-slot empty" data-slot="4"></div>
                        <div class="mod-slot empty" data-slot="5"></div>
                        <div class="mod-slot empty" data-slot="6"></div>
                        <div class="mod-slot empty" data-slot="7"></div>
                        
                        <!-- Slot de Aura -->
                        <div class="mod-slot aura empty" data-slot="8" data-type="aura">
                            <span class="mod-slot-label">Aura</span>
                        </div>
                        
                        <!-- Slot Exilus -->
                        <div class="mod-slot exilus empty" data-slot="9" data-type="exilus">
                            <span class="mod-slot-label">Exilus</span>
                        </div>
                    </div>
                    
                    <div class="arcanes-section">
                        <h4>Arcanos</h4>
                        <div class="warframe-mods-grid">
                            <div class="mod-slot arcane empty" data-slot="10" data-type="arcane">
                                <span class="mod-slot-label">Arcano 1</span>
                            </div>
                            <div class="mod-slot arcane empty" data-slot="11" data-type="arcane">
                                <span class="mod-slot-label">Arcano 2</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Armas -->
                <div id="weapon-mods-section" style="display: none;">
                    <h3>Mods de Arma</h3>
                    <div class="weapon-mods-grid" id="weapon-mods-grid">
                        <!-- 8 slots normais -->
                        <div class="mod-slot empty" data-slot="0"></div>
                        <div class="mod-slot empty" data-slot="1"></div>
                        <div class="mod-slot empty" data-slot="2"></div>
                        <div class="mod-slot empty" data-slot="3"></div>
                        <div class="mod-slot empty" data-slot="4"></div>
                        <div class="mod-slot empty" data-slot="5"></div>
                        <div class="mod-slot empty" data-slot="6"></div>
                        <div class="mod-slot empty" data-slot="7"></div>
                        
                        <!-- Slot Exilus -->
                        <div class="mod-slot exilus empty" data-slot="8" data-type="exilus">
                            <span class="mod-slot-label">Exilus</span>
                        </div>
                    </div>
                    
                    <div class="arcanes-section">
                        <h4>Arcano</h4>
                        <div class="weapon-mods-grid">
                            <div class="mod-slot arcane empty" data-slot="9" data-type="arcane">
                                <span class="mod-slot-label">Arcano</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Companheiros -->
                <div id="companion-mods-section" style="display: none;">
                    <h3>Mods de Companheiro</h3>
                    <div class="companion-mods-grid" id="companion-mods-grid">
                        <!-- 8 slots normais -->
                        <div class="mod-slot empty" data-slot="0"></div>
                        <div class="mod-slot empty" data-slot="1"></div>
                        <div class="mod-slot empty" data-slot="2"></div>
                        <div class="mod-slot empty" data-slot="3"></div>
                        <div class="mod-slot empty" data-slot="4"></div>
                        <div class="mod-slot empty" data-slot="5"></div>
                        <div class="mod-slot empty" data-slot="6"></div>
                        <div class="mod-slot empty" data-slot="7"></div>
                    </div>
                    
                    <div class="arcanes-section">
                        <h4>Arma do Companheiro</h4>
                        <div class="weapon-mods-grid">
                            <!-- 8 slots normais + 1 exilus -->
                            <div class="mod-slot empty" data-slot="8"></div>
                            <div class="mod-slot empty" data-slot="9"></div>
                            <div class="mod-slot empty" data-slot="10"></div>
                            <div class="mod-slot empty" data-slot="11"></div>
                            <div class="mod-slot empty" data-slot="12"></div>
                            <div class="mod-slot empty" data-slot="13"></div>
                            <div class="mod-slot empty" data-slot="14"></div>
                            <div class="mod-slot empty" data-slot="15"></div>
                            <div class="mod-slot exilus empty" data-slot="16" data-type="exilus">
                                <span class="mod-slot-label">Exilus</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Formul√°rio de Mod -->
            <div class="mod-form" id="mod-form">
                <h4 id="mod-form-title">Adicionar Mod</h4>
                <div class="form-group">
                    <label for="mod-name">Nome do Mod</label>
                    <input type="text" id="mod-name" class="form-control" placeholder="Ex: Intensify, Serration">
                </div>
                
                <div class="form-group">
                    <label>Atributos do Mod</label>
                    <div id="mod-stats-container">
                        <!-- Atributos ser√£o adicionados aqui dinamicamente -->
                    </div>
                    <button type="button" class="btn btn-secondary btn-sm add-stat-btn" id="add-stat-btn">
                        <i class="fas fa-plus"></i> Adicionar Atributo
                    </button>
                </div>
                
                <div class="riven-toggle">
                    <input type="checkbox" id="is-riven">
                    <label for="is-riven">Este √© um mod Riven</label>
                </div>
                
                <div class="riven-fields" id="riven-fields">
                    <div class="form-group">
                        <label for="riven-name">Nome Riven (Opcional)</label>
                        <input type="text" id="riven-name" class="form-control" placeholder="Ex: Rubico Visican">
                    </div>
                    <div class="form-group">
                        <label for="riven-stats">Atributos Riven</label>
                        <textarea id="riven-stats" class="form-control" rows="3" placeholder="Descreva os atributos positivos e negativos do Riven"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="riven-rank">Rank do Riven</label>
                        <select id="riven-rank" class="form-control">
                            <option value="0">Rank 0</option>
                            <option value="1">Rank 1</option>
                            <option value="2">Rank 2</option>
                            <option value="3" selected>Rank 3</option>
                            <option value="4">Rank 4</option>
                            <option value="5">Rank 5</option>
                            <option value="6">Rank 6</option>
                            <option value="7">Rank 7</option>
                            <option value="8">Rank 8</option>
                        </select>
                    </div>
                </div>
                
                <div class="mod-form-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-mod-btn">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="save-mod-btn">Salvar Mod</button>
                </div>
            </div>
            
            <div class="form-group">
                <label for="build-description">Descri√ß√£o da Build</label>
                <textarea id="build-description" class="form-control" rows="3" placeholder="Descreva sua build, estrat√©gias de uso, etc."></textarea>
            </div>
            
            <div class="editor-actions">
                <button type="button" class="btn btn-danger" id="cancel-build-btn">Cancelar</button>
                <button type="button" class="btn btn-primary" id="save-build-btn">Salvar Build</button>
            </div>
        </div>
    </div>

<script>
// Vari√°veis de estado
let currentBuild = {
    id: null,
    userId: getUserId(),
    name: '',
    type: 'warframe',
    item: {
        name: '',
        image: null,
        stats: {}
    },
    mods: [],
    description: '',
    isPublic: true,
    createdAt: null
};

let builds = [];
let currentSelectedSlot = null;
let editingModIndex = null;
let nextStatId = 0;
let currentFilter = 'all';

// URL base da API (ajuste conforme necess√°rio)
const API_BASE_URL = window.location.origin;

// Inicializa√ß√£o
document.addEventListener('DOMContentLoaded', function() {
    // Carregar builds
    loadBuilds();
    
    // Configurar eventos
    setupEventListeners();
    
    // Configurar upload de imagem
    setupImageUpload();
    
    // Configurar tipo de build
    document.getElementById('build-type').addEventListener('change', function() {
        updateSlotsByType(this.value);
    });
    
    // Configurar toggle Riven
    document.getElementById('is-riven').addEventListener('change', function() {
        document.getElementById('riven-fields').classList.toggle('active', this.checked);
    });
    
    // Configurar bot√£o para adicionar atributos
    document.getElementById('add-stat-btn').addEventListener('click', addStatRow);
    
    // Configurar filtros
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            currentFilter = this.dataset.filter;
            updateActiveFilterButton();
            loadBuilds();
        });
    });
    
    // Se houver hash #new, mostrar editor
    if (window.location.hash === '#new') {
        showBuildEditor();
    }
});

// Fun√ß√£o para obter o ID do usu√°rio (simulada)
function getUserId() {
    // Em uma aplica√ß√£o real, isso viria de um sistema de login
    if (!localStorage.getItem('wfBuilderUserId')) {
        localStorage.setItem('wfBuilderUserId', 'user-' + Math.random().toString(36).substr(2, 9));
    }
    return localStorage.getItem('wfBuilderUserId');
}

function updateActiveFilterButton() {
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.filter === currentFilter);
    });
}

async function loadBuilds() {
    try {
        const buildsGrid = document.getElementById('builds-grid');
        buildsGrid.innerHTML = '<div class="loading">Carregando builds...</div>';
        
        // Chamada √† API para buscar builds
        const response = await fetch(`${API_BASE_URL}/api/builds?${currentFilter !== 'all' ? `type=${currentFilter}` : ''}`);
        
        if (!response.ok) {
            throw new Error('Erro ao carregar builds');
        }
        
        const result = await response.json();
        
        if (!result.success) {
            throw new Error(result.error || 'Erro ao carregar builds');
        }
        
        builds = result.data;
        buildsGrid.innerHTML = '';
        
        if (builds.length === 0) {
            buildsGrid.innerHTML = `
                <div class="no-builds">
                    <i class="fas fa-user-astronaut fa-3x"></i>
                    <h3>Nenhuma build encontrada</h3>
                    <p>${currentFilter === 'all' ? 'Crie sua primeira build clicando no bot√£o "Nova Build"' : 
                      'Nenhuma build deste tipo encontrada. Crie uma nova!'}</p>
                </div>
            `;
            return;
        }
        
        // Ordenar builds pela data de cria√ß√£o (mais recente primeiro)
        builds.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
        
        builds.forEach(build => {
            const modsCount = build.mods.filter(m => m).length;
            const maxMods = build.type === 'warframe' ? 10 : build.type === 'companion' ? 8 : 9;
            
            buildsGrid.innerHTML += `
                <div class="build-card ${build.type}" data-build-id="${build._id}">
                    <div class="build-header">
                        <div>
                            <div class="build-title">${build.name}</div>
                            <div class="build-type">${getTypeName(build.type)}</div>
                        </div>
                        <div class="build-actions">
                            <button class="build-action-btn" data-action="edit" title="Editar">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="build-action-btn" data-action="delete" title="Excluir">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <div class="build-image">
                        ${build.item.image ? 
                            `<img src="${build.item.image}" alt="${build.item.name}">` : 
                            `<i class="fas fa-user-astronaut fa-3x" style="color: var(--light-gray);"></i>`
                        }
                    </div>
                    <div class="build-content">
                        <div class="build-stats">
                            ${build.type === 'warframe' ? `
                                <span class="stat health-stat">
                                    <i class="fas fa-heart"></i>
                                    ${build.item.stats.health || 'N/A'}
                                </span>
                                <span class="stat shield-stat">
                                    <i class="fas fa-shield-alt"></i>
                                    ${build.item.stats.shield || 'N/A'}
                                </span>
                                <span class="stat armor-stat">
                                    <i class="fas fa-layer-group"></i>
                                    ${build.item.stats.armor || 'N/A'}
                                </span>
                                <span class="stat energy-stat">
                                    <i class="fas fa-bolt"></i>
                                    ${build.item.stats.energy || 'N/A'}
                                </span>
                            ` : build.type === 'companion' ? `
                                <span class="stat health-stat">
                                    <i class="fas fa-heart"></i>
                                    ${build.item.stats.health || 'N/A'}
                                </span>
                                <span class="stat shield-stat">
                                    <i class="fas fa-shield-alt"></i>
                                    ${build.item.stats.shield || 'N/A'}
                                </span>
                                <span class="stat armor-stat">
                                    <i class="fas fa-layer-group"></i>
                                    ${build.item.stats.armor || 'N/A'}
                                </span>
                            ` : `
                                <span class="stat">
                                    <i class="fas fa-bullseye"></i>
                                    Dano: ${build.item.stats.damage || 'N/A'}
                                </span>
                                <span class="stat">
                                    <i class="fas fa-bolt"></i>
                                    Cr√≠tico: ${build.item.stats.crit || 'N/A'}
                                </span>
                            `}
                        </div>
                        <div class="build-description">
                            ${build.description || 'Nenhuma descri√ß√£o fornecida.'}
                        </div>
                        <div class="build-mods">
                            <div class="mods-title">
                                <i class="fas fa-puzzle-piece"></i>
                                Mods Equipados (${modsCount}/${maxMods})
                            </div>
                            <div class="mods-list">
                                ${build.mods.filter(m => m).map(mod => `
                                    <div class="mod-item" title="${mod.name}${mod.isRiven ? ' (Riven)' : ''}">
                                        ${mod.name}${mod.isRiven ? ' (Riven)' : ''}
                                        <div class="mod-stats">
                                            ${Object.entries(mod.stats).map(([stat, value]) => `
                                                <div class="mod-stat ${value.includes('-') ? 'negative' : ''}">
                                                    ${stat}: ${value}
                                                </div>
                                            `).join('')}
                                            ${mod.isRiven && mod.rivenStats ? `
                                                <div class="mod-stat" style="margin-top: 5px; color: var(--accent);">
                                                    ${mod.rivenStats}
                                                </div>
                                            ` : ''}
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        });
    } catch (error) {
        console.error('Erro ao carregar builds:', error);
        showNotification('Erro ao carregar builds: ' + error.message, 'error');
        document.getElementById('builds-grid').innerHTML = `
            <div class="error">
                <i class="fas fa-exclamation-triangle"></i>
                <h3>Erro ao carregar builds</h3>
                <p>${error.message}</p>
            </div>
        `;
    }
}

function getTypeName(type) {
    const types = {
        'warframe': 'Warframe',
        'primary': 'Arma Prim√°ria',
        'secondary': 'Arma Secund√°ria',
        'melee': 'Arma Corpo-a-Corpo',
        'companion': 'Companheiro'
    };
    return types[type] || 'Build';
}

function updateSlotsByType(type) {
    // Esconder todas as se√ß√µes primeiro
    document.getElementById('warframe-mods-section').style.display = 'none';
    document.getElementById('weapon-mods-section').style.display = 'none';
    document.getElementById('companion-mods-section').style.display = 'none';
    
    // Mostrar a se√ß√£o correta
    if (type === 'warframe') {
        document.getElementById('warframe-mods-section').style.display = 'block';
        currentBuild.mods = Array(12).fill(null); // 10 mods + 2 arcanos
    } else if (type === 'companion') {
        document.getElementById('companion-mods-section').style.display = 'block';
        currentBuild.mods = Array(17).fill(null); // 8 mods + 9 slots da arma
    } else {
        document.getElementById('weapon-mods-section').style.display = 'block';
        currentBuild.mods = Array(10).fill(null); // 9 mods + 1 arcano
    }
    
    // Atualizar tipo na build atual
    currentBuild.type = type;
    
    // Renderizar slots vazios
    renderModSlots();
}

function renderModSlots() {
    // Limpar todos os slots primeiro
    document.querySelectorAll('.mod-slot').forEach(slot => {
        slot.innerHTML = '';
        slot.classList.remove('empty');
        
        // Restaurar labels se necess√°rio
        const slotType = slot.dataset.type;
        if (slotType === 'aura') {
            slot.innerHTML = '<span class="mod-slot-label">Aura</span>';
            slot.classList.add('empty');
        } else if (slotType === 'exilus') {
            slot.innerHTML = '<span class="mod-slot-label">Exilus</span>';
            slot.classList.add('empty');
        } else if (slotType === 'arcane') {
            slot.innerHTML = `<span class="mod-slot-label">Arcano ${parseInt(slot.dataset.slot) - 9}</span>`;
            slot.classList.add('empty');
        } else {
            slot.classList.add('empty');
        }
    });
    
    // Preencher slots com mods existentes
    currentBuild.mods.forEach((mod, index) => {
        if (mod) {
            const slot = document.querySelector(`.mod-slot[data-slot="${index}"]`);
            if (slot) {
                slot.innerHTML = mod.name;
                if (mod.isRiven) {
                    slot.innerHTML += ' <small>(Riven)</small>';
                    slot.style.color = 'var(--accent)';
                }
                slot.classList.remove('empty');
                
                // Restaurar label se for um slot especial
                const slotType = slot.dataset.type;
                if (slotType === 'aura') {
                    slot.innerHTML += '<span class="mod-slot-label">Aura</span>';
                } else if (slotType === 'exilus') {
                    slot.innerHTML += '<span class="mod-slot-label">Exilus</span>';
                } else if (slotType === 'arcane') {
                    slot.innerHTML += `<span class="mod-slot-label">Arcano ${index - 9}</span>`;
                }
            }
        }
    });
}

function setupEventListeners() {
    // Novo bot√£o de build
    document.getElementById('new-build-btn').addEventListener('click', showBuildEditor);
    
    // Bot√µes de a√ß√£o da build
    document.addEventListener('click', function(e) {
        if (e.target.closest('.build-action-btn')) {
            const btn = e.target.closest('.build-action-btn');
            const buildId = btn.closest('.build-card').dataset.buildId;
            const action = btn.dataset.action;
            
            if (action === 'edit') {
                editBuild(buildId);
            } else if (action === 'delete') {
                deleteBuild(buildId);
            }
        }
    });
    
    // Slots de mods
    document.addEventListener('click', function(e) {
        if (e.target.closest('.mod-slot')) {
            const slot = e.target.closest('.mod-slot');
            const slotIndex = parseInt(slot.dataset.slot);
            
            if (slot.classList.contains('empty')) {
                // Abrir formul√°rio para novo mod
                openModForm(slotIndex);
            } else {
                // Editar mod existente
                openModForm(slotIndex, currentBuild.mods[slotIndex]);
            }
        }
    });
    
    // Bot√µes do formul√°rio de mod
    document.getElementById('cancel-mod-btn').addEventListener('click', closeModForm);
    document.getElementById('save-mod-btn').addEventListener('click', saveMod);
    
    // Bot√µes de a√ß√£o do editor
    document.getElementById('cancel-build-btn').addEventListener('click', cancelBuild);
    document.getElementById('save-build-btn').addEventListener('click', saveBuild);
}

function setupImageUpload() {
    const imageUpload = document.getElementById('image-upload');
    const imagePreview = document.getElementById('image-preview');
    
    imageUpload.addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            // Verificar tamanho do arquivo (m√°ximo 2MB)
            if (file.size > 2 * 1024 * 1024) {
                showNotification('A imagem deve ter no m√°ximo 2MB', 'error');
                return;
            }
            
            const reader = new FileReader();
            
            reader.onload = function(event) {
                imagePreview.innerHTML = `<img src="${event.target.result}" alt="Preview">`;
                currentBuild.item.image = event.target.result; // Armazena a imagem como Base64
            }
            
            reader.readAsDataURL(file);
        }
    });
}
function addStatRow(stat = '', value = '', isNegative = false) {
    const statId = nextStatId++;
    const statsContainer = document.getElementById('mod-stats-container');
    
    const statRow = document.createElement('div');
    statRow.className = 'stat-row';
    statRow.dataset.statId = statId;
    
    statRow.innerHTML = `
        <select class="form-control stat-type" id="stat-type-${statId}">
            <option value="">Selecione um atributo</option>
            <option value="Power Strength" ${stat === 'Power Strength' ? 'selected' : ''}>For√ßa de Habilidade</option>
            <option value="Power Efficiency" ${stat === 'Power Efficiency' ? 'selected' : ''}>Efici√™ncia de Habilidade</option>
            <option value="Power Duration" ${stat === 'Power Duration' ? 'selected' : ''}>Dura√ß√£o de Habilidade</option>
            <option value="Power Range" ${stat === 'Power Range' ? 'selected' : ''}>Alcance de Habilidade</option>
            <option value="Health" ${stat === 'Health' ? 'selected' : ''}>Vida</option>
            <option value="Shield" ${stat === 'Shield' ? 'selected' : ''}>Escudo</option>
            <option value="Armor" ${stat === 'Armor' ? 'selected' : ''}>Armadura</option>
            <option value="Energy" ${stat === 'Energy' ? 'selected' : ''}>Energia</option>
            <option value="Damage" ${stat === 'Damage' ? 'selected' : ''}>Dano</option>
            <option value="Critical Chance" ${stat === 'Critical Chance' ? 'selected' : ''}>Chance Cr√≠tica</option>
            <option value="Critical Damage" ${stat === 'Critical Damage' ? 'selected' : ''}>Dano Cr√≠tico</option>
            <option value="Status Chance" ${stat === 'Status Chance' ? 'selected' : ''}>Chance de Status</option>
            <option value="Fire Rate" ${stat === 'Fire Rate' ? 'selected' : ''}>Taxa de Disparo</option>
            <option value="Multishot" ${stat === 'Multishot' ? 'selected' : ''}>Multidisparo</option>
            <option value="Reload Speed" ${stat === 'Reload Speed' ? 'selected' : ''}>Velocidade de Recarga</option>
            <option value="Magazine Capacity" ${stat === 'Magazine Capacity' ? 'selected' : ''}>Capacidade do Pente</option>
            <option value="Ammo Maximum" ${stat === 'Ammo Maximum' ? 'selected' : ''}>Muni√ß√£o M√°xima</option>
            <option value="Attack Speed" ${stat === 'Attack Speed' ? 'selected' : ''}>Velocidade de Ataque</option>
            <option value="Range" ${stat === 'Range' ? 'selected' : ''}>Alcance</option>
            <option value="Combo Duration" ${stat === 'Combo Duration' ? 'selected' : ''}>Dura√ß√£o do Combo</option>
            <option value="Other" ${stat === 'Other' ? 'selected' : ''}>Outro</option>
        </select>
        <input type="text" class="form-control stat-value" id="stat-value-${statId}" value="${value}" placeholder="Ex: +30%, -20%">
        <div class="remove-stat" onclick="removeStatRow(${statId})">
            <i class="fas fa-times"></i>
        </div>
    `;
    
    statsContainer.appendChild(statRow);
    
    // Se for negativo, marcar o valor como negativo
    if (isNegative && !value.startsWith('-')) {
        document.getElementById(`stat-value-${statId}`).value = `-${value}`;
    }
}

function removeStatRow(statId) {
    const statRow = document.querySelector(`.stat-row[data-stat-id="${statId}"]`);
    if (statRow) {
        statRow.remove();
    }
}

function openModForm(slotIndex, mod = null) {
    const modForm = document.getElementById('mod-form');
    editingModIndex = slotIndex;
    
    // Resetar formul√°rio
    document.getElementById('mod-name').value = '';
    document.getElementById('mod-stats-container').innerHTML = '';
    document.getElementById('is-riven').checked = false;
    document.getElementById('riven-name').value = '';
    document.getElementById('riven-stats').value = '';
    document.getElementById('riven-rank').value = '3';
    document.getElementById('riven-fields').classList.remove('active');
    
    // Configurar t√≠tulo do formul√°rio
    const slot = document.querySelector(`.mod-slot[data-slot="${slotIndex}"]`);
    let slotType = 'Mod';
    if (slot.dataset.type === 'aura') slotType = 'Aura';
    else if (slot.dataset.type === 'exilus') slotType = 'Exilus';
    else if (slot.dataset.type === 'arcane') slotType = 'Arcano';
    
    document.getElementById('mod-form-title').textContent = `Adicionar ${slotType}`;
    
    // Preencher com dados do mod se estiver editando
    if (mod) {
        document.getElementById('mod-name').value = mod.name;
        
        // Adicionar atributos
        Object.entries(mod.stats).forEach(([stat, value]) => {
            const isNegative = value.startsWith('-');
            const cleanValue = isNegative ? value.substring(1) : value;
            addStatRow(stat, cleanValue, isNegative);
        });
        
        if (mod.isRiven) {
            document.getElementById('is-riven').checked = true;
            document.getElementById('riven-name').value = mod.rivenName || '';
            document.getElementById('riven-stats').value = mod.rivenStats || '';
            document.getElementById('riven-rank').value = mod.rivenRank || '3';
            document.getElementById('riven-fields').classList.add('active');
        }
    } else {
        // Adicionar uma linha vazia para novo mod
        addStatRow();
    }
    
    // Mostrar formul√°rio
    modForm.style.display = 'block';
    modForm.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

function closeModForm() {
    document.getElementById('mod-form').style.display = 'none';
    editingModIndex = null;
}

function saveMod() {
    const name = document.getElementById('mod-name').value.trim();
    const isRiven = document.getElementById('is-riven').checked;
    const rivenName = document.getElementById('riven-name').value.trim();
    const rivenStats = document.getElementById('riven-stats').value.trim();
    const rivenRank = document.getElementById('riven-rank').value;
    
    // Coletar atributos
    const stats = {};
    const statRows = document.querySelectorAll('.stat-row');
    
    statRows.forEach(row => {
        const stat = row.querySelector('.stat-type').value.trim();
        let value = row.querySelector('.stat-value').value.trim();
        
        if (stat && value) {
            // Garantir que valores percentuais tenham o sinal %
            if (!value.includes('%') && !value.includes('x')) {
                value = value + '%';
            }
            stats[stat] = value;
        }
    });
    
    if (!name || Object.keys(stats).length === 0) {
        showNotification('Preencha pelo menos o nome do mod e um atributo com valor', 'error');
        return;
    }
    
    const mod = {
        name,
        stats,
        isRiven
    };
    
    // Adicionar informa√ß√µes Riven se for um mod Riven
    if (isRiven) {
        mod.rivenName = rivenName;
        mod.rivenStats = rivenStats;
        mod.rivenRank = rivenRank;
    }
    
    // Salvar mod no slot atual
    currentBuild.mods[editingModIndex] = mod;
    
    // Atualizar visualiza√ß√£o dos slots
    renderModSlots();
    
    // Fechar formul√°rio
    closeModForm();
    
    showNotification('Mod salvo com sucesso!', 'success');
}

function showBuildEditor() {
    // Resetar build atual
    currentBuild = {
        id: null,
        userId: getUserId(),
        name: '',
        type: 'warframe',
        item: {
            name: '',
            image: null,
            stats: {}
        },
        mods: [],
        description: '',
        isPublic: true,
        createdAt: new Date().toISOString()
    };
    
    // Configurar slots baseados no tipo padr√£o (warframe)
    updateSlotsByType('warframe');
    
    // Resetar UI
    document.getElementById('build-name').value = '';
    document.getElementById('build-type').value = 'warframe';
    document.getElementById('item-name').value = '';
    document.getElementById('build-description').value = '';
    document.getElementById('image-preview').innerHTML = '<i class="fas fa-image fa-3x" style="color: var(--light-gray);"></i>';
    document.getElementById('image-upload').value = '';
    document.getElementById('editor-title').textContent = 'Criar Nova Build';
    
    // Mostrar editor e esconder grid
    document.getElementById('builds-grid').style.display = 'none';
    document.getElementById('build-editor').style.display = 'block';
    
    // Rolar para o editor
    document.getElementById('build-editor').scrollIntoView({ behavior: 'smooth' });
}

async function editBuild(buildId) {
    try {
        const response = await fetch(`${API_BASE_URL}/api/builds/${buildId}`);
        
        if (!response.ok) {
            throw new Error('Erro ao carregar build');
        }
        
        const result = await response.json();
        
        if (!result.success) {
            throw new Error(result.error || 'Erro ao carregar build');
        }
        
        currentBuild = result.data;
        
        // Preencher formul√°rio
        document.getElementById('build-name').value = currentBuild.name;
        document.getElementById('build-type').value = currentBuild.type;
        document.getElementById('item-name').value = currentBuild.item.name;
        document.getElementById('build-description').value = currentBuild.description || '';
        document.getElementById('editor-title').textContent = 'Editar Build';
        
        // Atualizar slots baseados no tipo
        updateSlotsByType(currentBuild.type);
        
        // Atualizar imagem
        const imagePreview = document.getElementById('image-preview');
        if (currentBuild.item.image) {
            imagePreview.innerHTML = `<img src="${currentBuild.item.image}" alt="${currentBuild.item.name}">`;
        } else {
            imagePreview.innerHTML = '<i class="fas fa-image fa-3x" style="color: var(--light-gray);"></i>';
        }
        
        // Mostrar editor
        document.getElementById('builds-grid').style.display = 'none';
        document.getElementById('build-editor').style.display = 'block';
        
        // Rolar para o editor
        document.getElementById('build-editor').scrollIntoView({ behavior: 'smooth' });
    } catch (error) {
        console.error('Erro ao editar build:', error);
        showNotification(`Erro ao carregar build: ${error.message}`, 'error');
    }
}

function cancelBuild() {
    document.getElementById('builds-grid').style.display = 'grid';
    document.getElementById('build-editor').style.display = 'none';
    document.getElementById('mod-form').style.display = 'none';
}

async function saveBuild() {
    try {
        // Validar build
        currentBuild.name = document.getElementById('build-name').value.trim();
        currentBuild.type = document.getElementById('build-type').value;
        currentBuild.item.name = document.getElementById('item-name').value.trim();
        currentBuild.description = document.getElementById('build-description').value.trim();
        
        if (!currentBuild.name) {
            showNotification('D√™ um nome √† sua build', 'error');
            return;
        }
        
        if (!currentBuild.item.name) {
            showNotification('Informe o nome do Warframe, arma ou companheiro', 'error');
            return;
        }

        // Adicionar stats b√°sicos baseados no tipo
        if (currentBuild.type === 'warframe') {
            currentBuild.item.stats = {
                health: 'N/A',
                shield: 'N/A',
                armor: 'N/A',
                energy: 'N/A'
            };
        } else if (currentBuild.type === 'companion') {
            currentBuild.item.stats = {
                health: 'N/A',
                shield: 'N/A',
                armor: 'N/A'
            };
        } else {
            currentBuild.item.stats = {
                damage: 'N/A',
                crit: 'N/A',
                status: 'N/A'
            };
        }

        // Preparar dados para enviar (agora como JSON)
        const buildData = {
            userId: currentBuild.userId,
            name: currentBuild.name,
            type: currentBuild.type,
            item: {
                name: currentBuild.item.name,
                image: currentBuild.item.image, // J√° est√° em Base64
                stats: currentBuild.item.stats
            },
            mods: currentBuild.mods,
            description: currentBuild.description,
            isPublic: currentBuild.isPublic
        };

        let url, method;
        if (!currentBuild.id) {
            // Criar nova build
            url = `${API_BASE_URL}/api/builds`;
            method = 'POST';
        } else {
            // Atualizar build existente
            url = `${API_BASE_URL}/api/builds/${currentBuild.id}`;
            method = 'PUT';
            buildData.id = currentBuild.id;
        }

        const response = await fetch(url, {
            method: method,
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(buildData)
        });

        if (!response.ok) {
            const errorResult = await response.json();
            throw new Error(errorResult.error || 'Erro ao salvar build');
        }

        const result = await response.json();

        if (!result.success) {
            throw new Error(result.error || 'Erro ao salvar build');
        }

        // Recarregar lista de builds
        await loadBuilds();
        
        // Voltar para a lista
        cancelBuild();
        
        showNotification('Build salva com sucesso!', 'success');
    } catch (error) {
        console.error('Erro ao salvar build:', error);
        showNotification(`Erro ao salvar build: ${error.message}`, 'error');
    }
}
async function deleteBuild(buildId) {
    if (!confirm('Tem certeza que deseja excluir esta build?')) {
        return;
    }
    
    try {
        const response = await fetch(`${API_BASE_URL}/api/builds/${buildId}`, {
            method: 'DELETE',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                userId: getUserId()
            })
        });
        
        if (!response.ok) {
            const errorResult = await response.json();
            throw new Error(errorResult.error || 'Erro ao excluir build');
        }
        
        const result = await response.json();
        
        if (!result.success) {
            throw new Error(result.error || 'Erro ao excluir build');
        }
        
        // Recarregar lista de builds
        await loadBuilds();
        
        showNotification('Build exclu√≠da com sucesso!', 'success');
    } catch (error) {
        console.error('Erro ao excluir build:', error);
        showNotification(`Erro ao excluir build: ${error.message}`, 'error');
    }
}

// Sistema de notifica√ß√µes
function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `notification ${type}`;
    notification.textContent = message;
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.classList.add('fade-out');
        setTimeout(() => notification.remove(), 500);
    }, 3000);
}

// Adicionar estilos para notifica√ß√µes
const notificationStyles = document.createElement('style');
notificationStyles.textContent = `
    .notification {
        position: fixed;
        bottom: 20px;
        right: 20px;
        padding: 15px 25px;
        border-radius: 5px;
        color: white;
        background-color: #333;
        box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        z-index: 1000;
        transition: all 0.3s ease;
    }
    
    .notification.success {
        background-color: var(--success);
    }
    
    .notification.error {
        background-color: var(--danger);
    }
    
    .notification.info {
        background-color: var(--primary);
    }
    
    .notification.fade-out {
        opacity: 0;
        transform: translateY(20px);
    }
`;
document.head.appendChild(notificationStyles);

// Fun√ß√£o global para remover linhas de atributos
window.removeStatRow = removeStatRow;
</script>
</body>
</html>